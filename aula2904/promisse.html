<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promisse</title>
    <script>
        console.log("--------------------- PROMISSE ---------------------");
        function fazerPedidoPizza(){
            return new Promise((resolve, reject) => {
                console.log("Pedido recebido, preparando...");
                setTimeout(() => {
                    resolve("Pizza pronta");
                }, 3 * 1000);
            });
        }

        function entregarPizza(){
            return new Promise((resolve, reject) => {
                console.log("Pizza a caminho da entrega...");
                setTimeout(() => {
                    resolve("Pizza entregue");
                }, 2 * 1000);
            });
        }

        async function processaPedido(){
            console.log("Cliente fez o pedido.");

            const pizza = await fazerPedidoPizza();
            console.log(pizza);

            const entrega = await entregarPizza();
            console.log(entrega);

            console.log("Cliente feliz comendo a pizza!");
        }

        processaPedido();

        //Outro exemplo de Promise
        function enviarEmail(destinatario){
            return new Promise((resolve, reject) => {
                console.log(`Enviando e-mail para ${destinatario}`);

                setTimeout(() => {
                    const sucesso = Math.random() > 0.2;
                    if(sucesso){
                        resolve("E-mail enviado com sucesso!");
                    }else{
                        reject("Falha ao enviar e-mail");
                    }
                }, 2 * 1000);
            });
        }

        async function processarEnvio(){
            try{
                const resultado = await enviarEmail("Jo√£o Victor");
                console.log(resultado);
            }catch(erro){
                console.log("Erro: " + erro);
            }
        }

        processarEnvio();
    </script>
</head>
<body>
    <h1 style="color: aliceblue;">Aula #09</h1>
</body>
</html>